# 구독해지 예측 AI 프로젝트 — 중간 진행 보고 (확장본)

> 대상: 개발부서 파트장  
> 목적: 모델 채택 사유, 연구/벤치마킹 상세, 차별점과 기술 선택의 논리적 근거를 명확히 설명

---

## 1. 추진 배경
- 구독 허브의 핵심 목표는 **고객 유지율(리텐션)** 향상
- 결제/상품 변경/행동 로그에서 나타나는 **시계열 패턴**이 해지의 조기 신호를 보임
- 기존 룰 기반 대응은 **정밀 타깃팅 미흡**, **조기 탐지 실패**, **관리 비용 증가** 문제

## 2. 과제 목표
- 해지율 상대 10% 감소, 고위험군 프로모션 전환율 +3pp, 발송량 30% 절감
- 사용자별 **해지 위험 점수(0~1)** 및 **리스크 레벨** 산출
- 위험군별 **맞춤형 프로모션/메시지 자동화**

---

## 3. 관련 연구(상세), 벤치마킹, 차별점

### 3.1 Churn Prediction 연구 동향 (상세)
**문제정의**  
- 시점 (t)에서 사용자 (u)의 `P(churn in [t, t+Δ])` 예측 또는 **time-to-event(생존분석)**

**라벨링 전략**  
- 해지일 (T_c) 기준 **N일 전~해지일** 윈도우를 Positive(1), 그 외 Negative(0)로 정의 → “조기 경보” 학습

**특징 공학(Feature Eng.)**  
- **시계열 집계**: 7/14/30일 롤링 합·평균(결제 실패/성공/쿠폰/환불/평균결제액)
- **행동 시그널**: 해지 키워드 검색, 해지 FAQ 조회, 해지 페이지 방문 (의도 신호)
- **상태 전이**: 다운그레이드/상품전환 횟수(최근 14/30일)

**모델 분류**  
1) **Tree Ensemble (GBDT, XGBoost/LightGBM/HistGBDT)**  
   - 집계 피처에서 강력, 학습/추론 속도 우수, 해석 용이(피처 중요도/SHAP)
2) **Sequence Model (LSTM/GRU/TFT)**  
   - 원시 시퀀스 입력에 강점, 장기 의존성 학습 가능(자원 소모↑, 서빙 복잡↑)
3) **생존분석(Cox, DeepSurv)**  
   - 시간-사건 모형, 해지까지 남은 시간 예측(가정/데이터 요구조건 존재)

**평가 지표**  
- **ROC-AUC, PR-AUC**, 리프트/게인, **임계치별 Precision/Recall/F1**, 캘리브레이션(Brier)

> 결론: 해지 조기 경보 목적 + 실시간 서빙 제약에서 **시계열 집계 피처 + GBDT** 조합이 가장 **현실적·효율적**.

---

### 3.2 벤치마킹 (산업 패턴 기반 상세)
> 특정 기업명이 아닌 **산업별 공통 패턴**을 정리했습니다.

**OTT/콘텐츠 구독**  
- **소비량 감소, 선호 장르 변화, 해지 FAQ/프로세스 페이지 조회**가 조기 신호  
- **리텐션 오퍼**: 일시 할인, 콘텐츠 추천, 휴면 방지 리마인더

**SaaS/생산성 구독**  
- **사용 빈도 감소, 좌석 수 축소, 플랜 다운그레이드** → 해지 가능성↑  
- **리텐션 오퍼**: 기능 제한 완화, 트레이닝 세션, 계약 조건 유연화

**이커머스 구독(정기배송 등)**  
- **결제 실패, 배송 주기 변경, 장바구니/취소 패턴**  
- **리텐션 오퍼**: 배송 주기 최적화 제안, 특정 카테고리 할인, 1회 무료 업그레이드

**통신/금융 구독**  
- **민원/FAQ 조회 증가, 부가서비스 해지, 잔여 혜택 미소비**  
- **리텐션 오퍼**: 요금제 재추천, 부가혜택 바우처

> 공통점: **행동 로그의 의도 신호**와 **결제/상품 전이**가 결합될수록 성능↑, **실시간 트리거형 캠페인**이 리텐션에 효과적.

---

### 3.3 차별점(우리 접근의 강점)
1) **멀티소스 통합**: 결제/상품/행동 로그를 단일 피처셋으로 통합 → **신호 융합**
2) **조기 경보 최적화 라벨링**: 해지 N일 전을 Positive로 정의 → **사전 개입**에 최적화
3) **경량 서빙**: GBDT→**ONNX** 변환, **WebFlux**로 p95 < 200ms 목표
4) **액션까지 연결**: **프로모션 엔진**(룰/모형 혼합) + **LLM·RAG 개인화 메시지**
5) **MLOps/거버넌스**: 모델 버전/임계치 관리, A/B 테스트, 드리프트 모니터링
6) **설명가능성**: SHAP/Permutation으로 **상위 영향 요인** 제공 → 운영/CS 협업 용이

---

## 7. 왜 **AI 기반**이 **룰 기반**보다 나은가 (기술적 비교)

### 7.1 데이터 복잡도와 상호작용
- **룰**: “14일 내 해지 FAQ 2회 + 결제 실패 1회 → 쿠폰” 같이 **선형/고정 조합**만 커버
- **AI**: 수십 개 피처의 **비선형 상호작용**(예: “다운그레이드 + 소액 결제 감소 + 심야 해지 검색 증가”)을 자동 학습

### 7.2 적응성(Adaptivity)
- **룰**: 패턴 변화 시 **수작업 업데이트** 필요 → 관리 비용↑, 릴리즈 지연
- **AI**: **재학습**으로 트렌드 반영, 계절성·이벤트 영향 자동 흡수

### 7.3 개인화(Per-user Calibration)
- **룰**: 동일 기준 → 과잉/과소 타깃팅
- **AI**: 사용자별 확률 추정으로 **미세한 차이 반영**, 임계치 기반 **비즈니스 제약**(예산)과 결합 용이

### 7.4 조기 탐지(Early Warning)
- **룰**: 특정 임계치 **넘은 뒤**에만 동작
- **AI**: **증상 누적의 미세 변화**를 점수화 → **선제 대응** 가능

### 7.5 성과 최적화(Policy Optimization) 관점
- **룰**: “If-Then”은 **정책 최적화**(예: 쿠폰 단가/타이밍) 어려움
- **AI**: 점수 기반 **우선순위 큐**로 **예산 제약하 ROI 최대화** 가능

> 결론: 룰은 초기 안전망/가드레일로 유지, **핵심 판단은 AI**로 이관하는 **하이브리드**가 최적.

---

## 8. 선택 모델이 “그” 시계열 모델이 된 이유 (후보 비교의 논리)

### 8.1 선택: **HistGradientBoostingClassifier (HGB)**
- **우리 피처셋 특성**(14/30일 집계 + 이산/연속 혼합)에 **가장 적합**
- **학습/서빙 효율**: GPU 없이도 충분한 성능, **ONNX 변환**으로 Java 서빙 최적
- **불균형 대응**: `class_weight="balanced"` 적용 용이
- **해석성/운영성**: 중요 피처/SHAP 도입 쉬움, 옵스 친화적

### 8.2 비선정: 다른 시계열 모델들
- **LSTM/GRU**: 순차 원본 신호엔 강점이나, GPU/메모리/지연비용↑, 운영 복잡도↑  
  → **PoC 단계 비용 대비 개선폭 제한**, 추후 GPU 인프라 확충 후 재평가
- **Temporal Fusion Transformer**: 다변량 포캐스팅에 강점이나 복잡성↑, 데이터 요건↑  
  → **데이터 스케일/실시간 서빙 제약**을 고려해 2단계 과제로 보류
- **XGBoost/LightGBM**: 성능 유사, 다만 **HGB가 빌드/서빙 체인 단순**(sklearn→ONNX)  
  → 엔지니어링 비용 최소화 관점에서 **HGB 우선**

---

## 9. 트레이닝 프로세스 (기술 상세)
1) **라벨링**: 해지일 기준 N일 윈도우 Positive → 조기 경보 최적화  
2) **피처화**: 14/30일 **롤링 집계** + 행동 시그널(해지의도) + 전이(다운그레이드)  
3) **스플릿**: Train/Val/Test **시간 순서 유지**(데이터 누수 방지)  
4) **튜닝**: Optuna로 **AP@Val** 최대화(실제 운영의 **탐지 성능**과 연결)  
5) **검증**: Test에서 **ROC/PR**, **임계치별 CM/Precision/Recall/F1** 저장(자동 리포트)  
6) **서빙 준비**: joblib + **ONNX** 산출 → **ECS/WebFlux** p95<200ms 목표  
7) **거버넌스**: 모델 버전, 임계치, 룰 파일(YAML) **GitOps**로 관리 → A/B 실험/롤백 용이

---

## 10. 요약(간결 보고)
- **왜 AI인가**: 비선형 상호작용/개인화/적응성이 필요하고, 예산 제약하 ROI 극대화에 유리
- **왜 HGB인가**: 현재 피처셋/서빙환경에 최적(성능·속도·운영성 균형), ONNX 서빙 강점
- **차별점**: 멀티소스 통합 + 조기 경보 라벨링 + 경량 서빙 + 액션 자동화(프로모션/LLM)
- **계획**: LSTM/TFT 비교, SHAP 기반 해석 UI, A/B로 최종 임계치/오퍼 최적화